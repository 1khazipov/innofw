FROM ipodsekin/astralinux:orel-slim-2.12.45-mg7.1.0

RUN apt-get update && apt-get upgrade -y
RUN apt-get install curl -y
#ffmpeg libsm6 libxext6 python3-pip iotop

RUN curl -sL \
  "https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh" > \
  "Miniconda3.sh"
RUN bash Miniconda3.sh -b
RUN rm -rf Miniconda3.sh

RUN conda create -n py38 python=3.8
RUN conda activate py38
RUN conda install -c conda-forge poetry
RUN poetry shell
RUN poetry lock --no-update
RUN poetry install

#RUN export PYTHONPATH=.
#RUN chmod +x /code/entrypoint.sh && chmod +x /code/run_tests.sh && /bin/bash -c "/code/run_tests.sh"
